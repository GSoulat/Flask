{% extends "base.html" %}

{% block content %}
<html>
<head>
<title>Chat Room</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.1/socket.io.js" integrity="sha512-9mpsATI0KClwt+xVZfbcf2lJ8IFBAwsubJ6mI3rtULwyM3fBmQFzj0It4tGqxLOGQwGfJdk/G+fANnxfq9/cew==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link rel="stylesheet" href="../static/style.css">

</head>
<body>
  <script type="text/javascript">
    $(document).ready(function() {
    
      var socket = io.connect('http://127.0.0.1:5000/');
    
      socket.on('connect', function() {
        socket.send($('#MyName').text() + ' : ' + 'Vous êtes connecté !');
      });
    
      socket.on('message', function(msg) {
        $("#messages").append('<li>'+msg+'</li>');
        console.log('Received message');
      });
    
      $('#sendbutton').on('click', function() {
        socket.send($('#MyName').text() + ' : ' + $('#myMessage').val());
        $('#myMessage').val('');
      });
    
    });
    </script>

<div class="chat">
  <div class="chat-title">
    <h1 id="MyName">{{ name }}</h1>
    <h2>Cupacabra</h2>
    <figure class="avatar">
      <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/156381/profile/profile-80.jpg" /></figure>
  </div>
  <div class="messages">
    <div class="messages-content">
      <ul id="messages"></ul>
    </div>
  </div>
  <div class="message-box">
    <textarea type="text" class="message-input" placeholder="Type message..." id="myMessage"></textarea>
    <button type="submit" class="message-submit" id="sendbutton">Send</button>
  </div>

</div>
<div class="bg"></div>
</body>
</html>
{% endblock %}